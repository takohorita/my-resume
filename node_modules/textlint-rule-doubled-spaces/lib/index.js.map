{"version":3,"file":"index.js","names":["matchPatterns","require","defaultOptions","allow","reporter","context","options","Syntax","RuleError","report","getSource","fixer","Str","node","text","allowMatch","regex","matches","exec","isAllow","some","m","startIndex","index","endIndex","replace","replaceTextRange","length","fix","linter"],"sources":["../src/index.js"],"sourcesContent":["const { matchPatterns } = require(\"@textlint/regexp-string-matcher\");\n\nconst defaultOptions = {\n  allow: [],\n};\n\nconst reporter = (context, options = {}) => {\n  const { Syntax, RuleError, report, getSource, fixer } = context;\n  const allow = options.allow ?? defaultOptions.allow;\n  return {\n    [Syntax.Str](node) {\n      const text = getSource(node);\n      const allowMatch = matchPatterns(text, allow);\n      const regex = /\\s{2,}/g;\n      while (true) {\n        const matches = regex.exec(text);\n        if (!matches) break;\n        const isAllow = allowMatch.some(\n          (m) => m.startIndex < matches.index && matches.index < m.endIndex\n        );\n        if (!isAllow) {\n          const replace = fixer.replaceTextRange([matches.index, matches.index + matches[0].length], \" \");\n          report(\n            node,\n            new RuleError(\"Found doubled spaces.\", {index: matches.index, fix: replace})\n          );\n        }\n      }\n    },\n  };\n};\n\nexport default {\n  linter: reporter,\n  fixer: reporter,\n};\n"],"mappings":";;;;;;AAAA,IAAM;EAAEA;AAAc,CAAC,GAAGC,OAAO,CAAC,iCAAiC,CAAC;AAEpE,IAAMC,cAAc,GAAG;EACrBC,KAAK,EAAE;AACT,CAAC;AAED,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,OAAO,EAAmB;EAAA;EAAA,IAAjBC,OAAO,uEAAG,CAAC,CAAC;EACrC,IAAM;IAAEC,MAAM;IAAEC,SAAS;IAAEC,MAAM;IAAEC,SAAS;IAAEC;EAAM,CAAC,GAAGN,OAAO;EAC/D,IAAMF,KAAK,qBAAGG,OAAO,CAACH,KAAK,2DAAID,cAAc,CAACC,KAAK;EACnD,OAAO;IACL,CAACI,MAAM,CAACK,GAAG,EAAEC,IAAI,EAAE;MACjB,IAAMC,IAAI,GAAGJ,SAAS,CAACG,IAAI,CAAC;MAC5B,IAAME,UAAU,GAAGf,aAAa,CAACc,IAAI,EAAEX,KAAK,CAAC;MAC7C,IAAMa,KAAK,GAAG,SAAS;MAAC;QAEtB,IAAMC,OAAO,GAAGD,KAAK,CAACE,IAAI,CAACJ,IAAI,CAAC;QAChC,IAAI,CAACG,OAAO,EAAE;QACd,IAAME,OAAO,GAAGJ,UAAU,CAACK,IAAI,CAC5BC,CAAC,IAAKA,CAAC,CAACC,UAAU,GAAGL,OAAO,CAACM,KAAK,IAAIN,OAAO,CAACM,KAAK,GAAGF,CAAC,CAACG,QAAQ,CAClE;QACD,IAAI,CAACL,OAAO,EAAE;UACZ,IAAMM,OAAO,GAAGd,KAAK,CAACe,gBAAgB,CAAC,CAACT,OAAO,CAACM,KAAK,EAAEN,OAAO,CAACM,KAAK,GAAGN,OAAO,CAAC,CAAC,CAAC,CAACU,MAAM,CAAC,EAAE,GAAG,CAAC;UAC/FlB,MAAM,CACJI,IAAI,EACJ,IAAIL,SAAS,CAAC,uBAAuB,EAAE;YAACe,KAAK,EAAEN,OAAO,CAACM,KAAK;YAAEK,GAAG,EAAEH;UAAO,CAAC,CAAC,CAC7E;QACH;MAAC;MAZH,OAAO,IAAI,EAAE;QAAA;QAAA,sBAEG;MAWhB;IACF;EACF,CAAC;AACH,CAAC;AAAC,eAEa;EACbI,MAAM,EAAEzB,QAAQ;EAChBO,KAAK,EAAEP;AACT,CAAC;AAAA"}