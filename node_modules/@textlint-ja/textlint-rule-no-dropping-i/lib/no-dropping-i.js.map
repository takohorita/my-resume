{"version":3,"sources":["../src/no-dropping-i.js"],"names":["isTargetWord","token","pos","pos_detail_1","basic_form","isMasuWord","module","exports","context","helper","RuleHelper","Syntax","report","getSource","RuleError","Str","node","isChildNode","Link","Image","BlockQuote","Emphasis","text","then","tokens","forEach","index","current","prev","word_position"],"mappings":"AAAA;AACA;;AACA;;AACA;;AAEA,SAASA,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,SAAOA,KAAK,CAACC,GAAN,KAAc,IAAd,IAAsBD,KAAK,CAACE,YAAN,KAAuB,MAA7C,IAAuDF,KAAK,CAACG,UAAN,KAAqB,GAAnF;AACH;;AAED,SAASC,UAAT,CAAoBJ,KAApB,EAA2B;AACvB,SAAOA,KAAK,CAACC,GAAN,KAAc,KAAd,IAAuBD,KAAK,CAACE,YAAN,KAAuB,GAA9C,IAAqDF,KAAK,CAACG,UAAN,KAAqB,IAAjF;AACH;;AAEDE,MAAM,CAACC,OAAP,GAAiB,UAASC,OAAT,EAAkB;AAC/B,MAAMC,MAAM,GAAG,IAAIC,8BAAJ,CAAeF,OAAf,CAAf;AACA,MAAM;AAAEG,IAAAA,MAAF;AAAUC,IAAAA,MAAV;AAAkBC,IAAAA,SAAlB;AAA6BC,IAAAA;AAA7B,MAA2CN,OAAjD;AACA,SAAO;AACH,KAACG,MAAM,CAACI,GAAR,EAAaC,IAAb,EAAmB;AACf,UAAIP,MAAM,CAACQ,WAAP,CAAmBD,IAAnB,EAAyB,CAACL,MAAM,CAACO,IAAR,EAAcP,MAAM,CAACQ,KAArB,EAA4BR,MAAM,CAACS,UAAnC,EAA+CT,MAAM,CAACU,QAAtD,CAAzB,CAAJ,EAA+F;AAC3F;AACH;;AACD,UAAMC,IAAI,GAAGT,SAAS,CAACG,IAAD,CAAtB;AACA,aAAO,yBAASM,IAAT,EAAeC,IAAf,CAAoBC,MAAM,IAAI;AACjCA,QAAAA,MAAM,CAACC,OAAP,CAAe,CAACxB,KAAD,EAAQyB,KAAR,KAAkB;AAC7B,cAAMC,OAAO,GAAG1B,KAAhB;AACA,cAAM2B,IAAI,GAAGJ,MAAM,CAACE,KAAK,GAAG,CAAT,CAAnB;;AACA,cAAI,CAACE,IAAD,IAAS,CAACD,OAAd,EAAuB;AACnB;AACH;;AACD,cAAI3B,YAAY,CAAC4B,IAAD,CAAZ,IAAsBvB,UAAU,CAACsB,OAAD,CAApC,EAA+C;AAC3Cf,YAAAA,MAAM,CACFI,IADE,EAEF,IAAIF,SAAJ,CAAc,gBAAd,EAAgC;AAC5BY,cAAAA,KAAK,EAAEC,OAAO,CAACE,aAAR,GAAwB;AADH,aAAhC,CAFE,CAAN;AAMH;AACJ,SAdD;AAeH,OAhBM,CAAP;AAiBH;;AAvBE,GAAP;AAyBH,CA5BD","sourcesContent":["// LICENSE : MIT\n\"use strict\";\nimport { RuleHelper } from \"textlint-rule-helper\";\nimport { tokenize } from \"kuromojin\";\n\nfunction isTargetWord(token) {\n    return token.pos === \"助詞\" && token.pos_detail_1 === \"接続助詞\" && token.basic_form === \"て\";\n}\n\nfunction isMasuWord(token) {\n    return token.pos === \"助動詞\" && token.pos_detail_1 === \"*\" && token.basic_form === \"ます\";\n}\n\nmodule.exports = function(context) {\n    const helper = new RuleHelper(context);\n    const { Syntax, report, getSource, RuleError } = context;\n    return {\n        [Syntax.Str](node) {\n            if (helper.isChildNode(node, [Syntax.Link, Syntax.Image, Syntax.BlockQuote, Syntax.Emphasis])) {\n                return;\n            }\n            const text = getSource(node);\n            return tokenize(text).then(tokens => {\n                tokens.forEach((token, index) => {\n                    const current = token;\n                    const prev = tokens[index - 1];\n                    if (!prev || !current) {\n                        return;\n                    }\n                    if (isTargetWord(prev) && isMasuWord(current)) {\n                        report(\n                            node,\n                            new RuleError(\"い抜き言葉を使用しています。\", {\n                                index: current.word_position - 1\n                            })\n                        );\n                    }\n                });\n            });\n        }\n    };\n};\n"],"file":"no-dropping-i.js"}